<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AL3MLEAT — مجمع روابط (مبسّط)</title>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent:#7dd3fc;
      --accent-2:#0284c7;
      --muted:#9aa7b4;
      --radius:14px;
      --shadow-lg: 0 30px 70px rgba(2,6,23,0.6);
      --shadow-sm: 0 10px 30px rgba(2,6,23,0.45);
    }

    /* الصفحة تستخدم صورة الخلفية 1.png الموجودة في نفس المجلد */
    html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;-webkit-font-smoothing:antialiased}
    body{
      display:flex;align-items:center;justify-content:center;padding:36px;
      /* الخلفية الأولى هي الصورة المطلوبة 1.png */
      background-image: url('1.png'), radial-gradient(1200px 600px at 10% 10%, rgba(7,93,151,0.12), transparent 10%), linear-gradient(180deg,#071129,#021122);
      background-size: cover, auto, auto;
      background-position: center;
      background-repeat: no-repeat;
      color: #e6eef8;
    }

    .shell{
      width:100%;max-width:1100px;border-radius:18px;padding:20px;
      background: linear-gradient(180deg, rgba(2,6,23,0.65), rgba(2,6,23,0.6));
      box-shadow:var(--shadow-lg); overflow:hidden;
      border:1px solid rgba(255,255,255,0.03);
    }

    header.top{
      display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:14px;
    }

    .brand{display:flex;gap:12px;align-items:center}
    .logo{
      width:60px;height:60px;border-radius:12px;display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg, rgba(125,211,252,0.08), rgba(2,132,199,0.06));
      border:1px solid rgba(255,255,255,0.03); font-weight:800;font-size:18px;color:var(--accent);
      box-shadow:var(--shadow-sm);
    }
    h1{margin:0;font-size:1.2rem}
    .tag{color:var(--muted);font-size:0.95rem;margin-top:4px}

    .controls{
      display:flex;gap:12px;align-items:center;margin-bottom:16px;flex-wrap:wrap;
    }
    .search{
      padding:12px 14px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);
      min-width:220px;width:420px;background:transparent;color:inherit;font-size:0.98rem;
      box-shadow: 0 8px 22px rgba(3,6,23,0.3) inset;
    }
    .search::placeholder{color:rgba(255,255,255,0.45)}

    .grid{
      display:grid;grid-template-columns:repeat(3, 1fr);gap:14px;max-height:63vh;padding:8px;overflow:auto;
    }
    @media (max-width:980px){ .grid{ grid-template-columns:repeat(2,1fr) } .search{ width:260px } }
    @media (max-width:640px){ .grid{ grid-template-columns:1fr } header.top{flex-direction:column;align-items:stretch} .search{ width:100% } }

    .card{
      display:flex;gap:14px;align-items:flex-start;padding:14px;border-radius:14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.03); transition:transform .16s ease, box-shadow .16s;
      cursor:default;
    }
    .card:hover{ transform:translateY(-6px); box-shadow: 0 28px 60px rgba(2,6,23,0.45) }

    .thumb{
      width:68px;height:68px;border-radius:12px;flex-shrink:0;display:flex;align-items:center;justify-content:center;
      background: linear-gradient(180deg, rgba(125,211,252,0.05), rgba(3,105,161,0.03));
      border:1px solid rgba(255,255,255,0.03); font-weight:700;color:var(--accent);font-size:18px;overflow:hidden;
    }
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}

    .meta{flex:1;min-width:0}
    .meta .title{font-weight:700;color:var(--accent);display:flex;align-items:center;gap:8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .meta .title a{color:inherit;text-decoration:none; display:inline-block; max-width:100%}
    .meta .url{color:var(--muted);margin-top:8px;font-size:0.95rem;word-break:break-all}
    .meta .tags{margin-top:10px;display:flex;gap:8px;flex-wrap:wrap}
    .tag-pill{background:rgba(125,211,252,0.07);color:var(--accent);padding:6px 8px;border-radius:999px;font-size:0.82rem;border:1px solid rgba(125,211,252,0.04)}

    .card .card-actions{display:flex;flex-direction:column;gap:8px;align-items:center}
    .card .card-actions .open-btn{width:86px;padding:8px 10px;font-size:0.95rem;border-radius:10px;border:none;background:linear-gradient(180deg,var(--accent),var(--accent-2));color:#011522;font-weight:700;cursor:pointer}

    .empty{padding:18px;text-align:center;border-radius:12px;color:var(--muted);margin-top:8px;background: linear-gradient(90deg, rgba(125,211,252,0.03), transparent);}

    /* toast */
    .toast{ position:fixed; left:50%; transform:translateX(-50%); bottom:28px;padding:10px 14px;border-radius:999px;background:rgba(3,105,161,0.95);color:white;font-weight:700;box-shadow:0 12px 30px rgba(3,105,161,0.2);opacity:0;pointer-events:none;transition:opacity .18s, transform .18s; z-index:80 }
    .toast.show{ opacity:1; transform: translateX(-50%) translateY(-6px); pointer-events:auto }
  </style>
</head>
<body>
  <main class="shell" role="main" aria-labelledby="main-title">
    <header class="top">
      <div class="brand">
        <div class="logo">AL</div>
        <div>
          <h1 id="main-title">مجمّع روابط AL3MLEAT</h1>
          <div class="tag">واجهة مبسطة — انقر "فتح" لزيارة أي رابط</div>
        </div>
      </div>

      <div class="actions" aria-hidden="true">
        <!-- تم إزالة أزرار الإضافة، التعديل، التصدير، فتح الكل، وتبديل الثيم كما طُلب -->
      </div>
    </header>

    <div class="controls" role="region" aria-label="أدوات">
      <input id="search" class="search" placeholder="ابحث عن عنوان أو رابط (اضغط / للتركيز)" aria-label="بحث">
    </div>

    <section id="list-area">
      <div id="grid" class="grid" aria-live="polite"></div>
      <div id="empty" class="empty" style="display:none">لا توجد روابط بعد.</div>
    </section>
  </main>

  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <script>
    // تبسيط: حذف وظائف الإضافة/التعديل/التصدير/الفتح-الكل/الثيم
    const STORAGE_KEY = 'al3mleat-links-v3';

    // البداية
    const initial = [
      { id: 'al3mleat-1', url: 'https://bdarkr.github.io/AL3MLEAT/', title: 'AL3MLEAT' },
      { id: 'al3mleat-2', url: 'https://bdarkr.github.io/AL3MLEAT1/', title: 'AL3MLEAT1' },
      { id: 'al3mleat-3', url: 'https://bdarkr.github.io/AL3MLEAT2/', title: 'AL3MLEAT2' },
      { id: 'al3mleat-4', url: 'https://bdarkr.github.io/AL3MLEAT4/', title: 'AL3MLEAT4' }
    ];

    let links = [];
    const grid = document.getElementById('grid');
    const empty = document.getElementById('empty');
    const searchEl = document.getElementById('search');
    const toastEl = document.getElementById('toast');

    const uid = () => Date.now().toString(36) + Math.random().toString(36).slice(2,8);
    const showToast = (t, ms=1200) => { toastEl.textContent = t; toastEl.classList.add('show'); clearTimeout(toastEl._t); toastEl._t = setTimeout(()=> toastEl.classList.remove('show'), ms); };

    function save(){
      try { localStorage.setItem(STORAGE_KEY, JSON.stringify(links)); } catch(e) {}
    }
    function load(){
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        links = raw ? JSON.parse(raw) : JSON.parse(JSON.stringify(initial));
      } catch(e){
        links = JSON.parse(JSON.stringify(initial));
      }
    }

    function faviconFor(url){
      try { const u = new URL(url); return `https://www.google.com/s2/favicons?domain=${u.hostname}&sz=128`; } catch(e){ return ''; }
    }

    function render(q=''){
      grid.innerHTML = '';
      const Q = (q || '').trim().toLowerCase();
      const list = links.filter(l => {
        if (!Q) return true;
        return (l.title||'').toLowerCase().includes(Q) || (l.url||'').toLowerCase().includes(Q) || (l.tags||[]).join(' ').includes(Q);
      });

      if (!list.length){ empty.style.display = 'block'; }
      else {
        empty.style.display = 'none';
        for (const item of list) grid.appendChild(makeCard(item));
      }
    }

    function makeCard(link){
      const el = document.createElement('div');
      el.className = 'card';
      el.dataset.id = link.id;

      const thumb = document.createElement('div');
      thumb.className = 'thumb';
      const img = document.createElement('img');
      img.src = faviconFor(link.url);
      img.alt = '';
      img.onload = () => { thumb.innerHTML = ''; thumb.appendChild(img); };
      img.onerror = () => { thumb.textContent = (link.title || link.url).slice(0,2).toUpperCase(); };
      thumb.textContent = (link.title || link.url).slice(0,2).toUpperCase();

      const meta = document.createElement('div');
      meta.className = 'meta';
      const title = document.createElement('div');
      title.className = 'title';
      const a = document.createElement('a');
      a.href = link.url;
      a.textContent = link.title || link.url;
      a.target = '_blank';
      a.rel = 'noopener noreferrer';
      title.appendChild(a);

      const urlLine = document.createElement('div');
      urlLine.className = 'url';
      urlLine.textContent = link.url;

      const tagsWrap = document.createElement('div');
      tagsWrap.className = 'tags';
      (link.tags||[]).forEach(t => {
        const p = document.createElement('span');
        p.className = 'tag-pill';
        p.textContent = t;
        p.addEventListener('click', () => { searchEl.value = t; render(t); });
        tagsWrap.appendChild(p);
      });

      meta.appendChild(title);
      meta.appendChild(urlLine);
      if ((link.tags||[]).length) meta.appendChild(tagsWrap);

      const actions = document.createElement('div');
      actions.className = 'card-actions';

      const openBtn = document.createElement('button');
      openBtn.className = 'open-btn';
      openBtn.textContent = 'فتح';
      openBtn.addEventListener('click', () => {
        window.open(link.url, '_blank', 'noopener');
        showToast('فتح الرابط');
      });

      actions.appendChild(openBtn);

      el.appendChild(thumb);
      el.appendChild(meta);
      el.appendChild(actions);
      return el;
    }

    // keyboard shortcut to focus search
    window.addEventListener('keydown', (e) => {
      if (e.key === '/' && document.activeElement !== searchEl) { e.preventDefault(); searchEl.focus(); }
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'k') { e.preventDefault(); searchEl.focus(); }
    });

    searchEl.addEventListener('input', (e) => render(e.target.value));

    // load and render
    load();
    render();

    // small startup toast
    setTimeout(()=> showToast(`${links.length} رابط جاهز` , 1000), 500);

    // Expose API if you want to programmatically set links from outside
    window.__AL3MLEAT = {
      getLinks: () => JSON.parse(JSON.stringify(links)),
      setLinks: (arr) => { if (Array.isArray(arr)){ links = JSON.parse(JSON.stringify(arr)); save(); render(); } }
    };
  </script>
</body>
</html>
